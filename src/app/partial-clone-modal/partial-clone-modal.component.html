<div class="modal-header">
  <h4 class="modal-title">Clone {{selectedModal}}</h4>
  <button type="button" class="close" aria-label="Close" (click)="dValue('Cross click')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <div *ngIf="selectedModal === 'course'">
    <div class="form-group row">
      <label for="example-text-input" class="col-2 col-form-label">Course Name</label>
      <div class="col-10">
        <input class="form-control" type="text" [(ngModel)]="createCourseClone" name="course_name" placeholder="Enter the course name to be clone"
          id="clone_course_name">
      </div>
    </div>
  </div>
  <div *ngIf="selectedModal == 'module'">
    <wizard>
      <wizard-step>
        <h3 class="col-6 my-auto">Module Details</h3>
        <div class="form-group row">
          <label for="clone_module_selected" class="col-4 col-form-label">Select Source Module</label>
          <div class="col-8">
            <ng-template #rt let-r="result" let-t="term">
              {{r.id+' - '+r.name}}
            </ng-template>
            <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="model" [ngbTypeahead]="search" (focus)="focus$.next($event.target.value)"
              (click)="click$.next($event.target.value)" #instance="ngbTypeahead" [inputFormatter]="formatter" [resultTemplate]="rt"
            />
          </div>
        </div>
        <div class="form-group row">
          <label for="module_name" class="col-4 col-form-label">Module Name
          </label>
          <div class="col-8">
            <input class="form-control" type="text" value="" placeholder="Enter the module name to be clone" id="module_name">
          </div>
        </div>
        <button type="button" class="btn btn-danger float-right" nextStep>Next Step</button>
        <!-- <button type="button" goToStep="2">Go directly to third Step</button> -->
        <!-- optionalStep is used for optional step -->
      </wizard-step>
      <wizard-step>
        <h3 class="col-6 my-auto">Course Selection</h3>
        <div class="text-center">
          <div class="btn-group btn-group-toggle" ngbRadioGroup name="courseSelection" [(ngModel)]="selectedExistingOrNewModel" (ngModelChange)="onFilterChange($event)">
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="EXISTING"> Existing
            </label>
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="NEW"> New
            </label>
          </div>
        </div>
        <div *ngIf="showExisting ; else newElseBlock">
          <div class="form-group row">
            <label class="col-4 col-form-label">Select Destination Course</label>
            <div class="col-8">
              <ng-template #courseTemplate let-r="result" let-t="term">
                {{r.id+' - '+r.name}}
              </ng-template>
              <input id="typeahead-focus-clone-course" type="text" class="form-control" [(ngModel)]="moduleCloneCourse" [ngbTypeahead]="searchCourse"
                (focus)="focusCourse$.next($event.target.value)" (click)="clickCourse$.next($event.target.value)" #instanceCourse="ngbTypeahead"
                [inputFormatter]="formatterCourse" [resultTemplate]="courseTemplate" />
            </div>
          </div>
        </div>
        <ng-template #newElseBlock>
          <div class="form-group row">
            <label for="new_course_name" class="col-4 col-form-label">Course Name
            </label>
            <div class="col-8">
              <input class="form-control" type="text" value="" placeholder="Enter the course name to be clone" id="new_course_name">
            </div>
          </div>
        </ng-template>
        <button type="button" class="btn btn-danger" previousStep>Previous</button>
        <button type="button" class="btn btn-danger float-right" (click)="finishFunction()">Finish</button>
      </wizard-step>
    </wizard>
  </div>
  <div *ngIf="selectedModal == 'session'">
    <wizard class="session-clone-wizard" [disableNavigationBar]=true [navBarLocation]="top" [defaultStepIndex]="0">
      <div class="row">
        <div class="col-12">
          <div class="progress">
            <div class="progress-bar " [ngClass]="{'bg-warning': isOn && currentprogress === 0, 'bg-success': isDisabled && currentprogress != 0}"
              role="progressbar" style="width: 33%; height: 5px" aria-valuenow="33" aria-valuemin="0" aria-valuemax="33"></div>
            <div class="progress-bar bg-success " [ngClass]="{'bg-warning': isOn && currentprogress === 1, 'bg-success': isDisabled && currentprogress != 1}"
              [style.width.%]="progressWidth1" role="progressbar" style="height: 5px" aria-valuenow="33" aria-valuemin="0"
              aria-valuemax="66">
            </div>
            <div class="progress-bar " role="progressbar" [ngClass]="{'bg-warning': isOn && currentprogress === 2, 'bg-success': isDisabled && currentprogress != 2}"
              [style.width.%]="progressWidth2" style="height: 5px" aria-valuenow="34" aria-valuemin="0" aria-valuemax="100">
            </div>

          </div>
        </div>
      </div>
      <div class="card mt-3">
        <div class="card-block">
          <wizard-step (stepEnter)="enterSecondStep($event)">
            <h3 class="col-6 my-auto">Session Details</h3>
            <div class="form-group row">
              <label for="clone_session_selected" class="col-4 col-form-label">Select Source Session</label>
              <div class="col-8">
                <ng-template #sessionSelect let-r="result" let-t="term">
                  {{r.id+' - '+r.name}}
                </ng-template>
                <input id="session-typeahead-focus" type="text" class="form-control" [(ngModel)]="sessionSelectModel" [ngbTypeahead]="searchSessionSelect"
                  (focus)="sessionSelectfocus$.next($event.target.value)" (click)="sessionSelectclick$.next($event.target.value)"
                  #sessionSelectInstance="ngbTypeahead" [class.is-invalid]="sessionFailed" placeholder="Select session" [inputFormatter]="sessionSelectformatter"
                  [resultTemplate]="sessionSelect" />
                <div class="invalid-feedback text-danger" *ngIf="sessionFailed">No Session Found for requested string.</div>
              </div>
            </div>
            <div class="form-group row">
              <label for="session_name" class="col-4 col-form-label">Session Name
              </label>
              <div class="col-8">
                <input class="form-control" type="text" [(ngModel)]="newSessionNameModel" value="" placeholder="Enter the session name to be clone"
                  id="session_name">
              </div>
            </div>
            <button type="button" class="btn btn-danger float-right" nextStep>Next Step</button>
            <!-- <button type="button" goToStep="2">Go directly to third Step</button> -->
            <!-- optionalStep is used for optional step -->
          </wizard-step>
          <wizard-step (stepEnter)="enterSecondStep($event)">
            <h3 class="col-6 my-auto">Module Selection</h3>
            <div class="text-center">
              <div class="btn-group btn-group-toggle" ngbRadioGroup name="moduleSelection" [(ngModel)]="selectedExistingOrNewModel" (ngModelChange)="onFilterChange($event)">
                <label ngbButtonLabel class="btn-danger">
                  <input ngbButton type="radio" value="EXISTING"> Existing
                </label>
                <label ngbButtonLabel class="btn-danger">
                  <input ngbButton type="radio" value="NEW"> New
                </label>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-4 col-form-label">Select Destination Course</label>
              <div class="col-8">
                <ng-template #courseTemplate let-r="result" let-t="term">
                  {{r.id+' - '+r.name}}
                </ng-template>
                <input id="typeahead-focus-clone-course" type="text" class="form-control" [(ngModel)]="moduleCloneCourse" [ngbTypeahead]="searchCourse"
                  (focus)="focusCourse$.next($event.target.value)" (click)="clickCourse$.next($event.target.value)" #instanceCourse="ngbTypeahead"
                  [inputFormatter]="formatterCourse" [resultTemplate]="courseTemplate" (ngModelChange)="onCourseChange($event)"
                  placeholder="Select course" [class.is-invalid]="courseFailed" />
                <div class="invalid-feedback text-danger" *ngIf="courseFailed">No Course Found for requested string.</div>
              </div>
            </div>
            <div class="form-group row" *ngIf="showExisting">
              <label for="module" class="col-4 col-form-label">Select Destination Module</label>
              <div class="col-8">
                <ng-template #sessionModuleSelectionTemplate let-r="result" let-t="term">
                  {{r.id+' - '+r.name}}
                </ng-template>
                <input id="typeahead-focus-session-module-select" type="text" class="form-control" [(ngModel)]="sessionModuleSelectionModel"
                  [class.is-invalid]="moduleFailed" [ngbTypeahead]="sessionModuleSelectionSearch" (focus)="sessionModuleSelectionfocus$.next($event.target.value)"
                  (click)="sessionModuleSelectionclick$.next($event.target.value)" #sessionModuleSelectionInstance="ngbTypeahead"
                  [inputFormatter]="sessionModuleSelectionformatter" [resultTemplate]="sessionModuleSelectionTemplate" placeholder="Select module"
                />
                <div class="invalid-feedback text-danger" *ngIf="moduleFailed">No Modules Found for requested string.</div>
              </div>
            </div>
            <div class="form-group row" *ngIf="!showExisting">
              <label for="new_module_name" class="col-4 col-form-label">Module Name
              </label>
              <div class="col-8">
                <input class="form-control" type="text" value="" [(ngModel)]="sessionsNewModuleModel" placeholder="Enter the module name to be clone"
                  id="new_module_name">
              </div>
            </div>
            <button type="button" class="btn btn-danger" previousStep>Previous</button>
            <button type="button" class="btn btn-danger float-right" nextStep>Next Step</button>
            <!-- <button type="button" class="btn btn-danger float-right" (click)="finishFunction()">Finish</button> -->
          </wizard-step>
          <wizard-step stepTitle="Title of step 3" (stepEnter)="enterSecondStep($event)">
            <h4>Review Session Clone</h4>
            <h6 class=" text-primary">Selected Session - {{sessionSelectModel != null ? sessionSelectModel.name : 'No Session selected' }}</h6>
            <nav class="breadcrumb">
              <h6 class="breadcrumb-item active">{{moduleCloneCourse != null ? moduleCloneCourse.name : 'No course selected' }}</h6>
              <h6 class="breadcrumb-item active">{{ sessionModuleSelectionModel != null ? sessionModuleSelectionModel.name : (sessionsNewModuleModel !=null
                && sessionsNewModuleModel != '' ?sessionsNewModuleModel : 'No Module selected') }}</h6>
              <h6 class="breadcrumb-item text-primary">{{newSessionNameModel != null && newSessionNameModel.trim() != '' ? newSessionNameModel : 'New Session Name
                not defined' }}
              </h6>
            </nav>
            <button type="button" previousStep>Previous Step</button>
            <button type="button" (click)="finishFunction()">Finish</button>
          </wizard-step>
        </div>
      </div>

    </wizard>
  </div>
</div>
<div class="modal-footer" *ngIf="selectedModal == 'course'">
  <button type="button" class="btn btn-danger" (click)="cValue('Close click')">Cancel</button>
  <button type="button" class="btn btn-danger" id="save_session_edit" (click)="cloneData()">Finish</button>
</div>